(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{44:function(e,t,n){},47:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var o=n(0),c=n.n(o),r=n(33),a=n.n(r),s=(n(42),n(43),n(44),n(12)),i=n(8),l=n(24),u=n(4),d=n.n(u),p=n(6),j=n(5),b=n(2),f="https://mate.academy/students-api";function m(e){return new Promise((function(t){setTimeout(t,e)}))}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o={method:t};return n&&(o.body=JSON.stringify(n),o.headers={"Content-Type":"application/json; charset=UTF-8"}),m(300).then((function(){return fetch(f+e,o)})).then((function(e){if(!e.ok)throw new Error;return e.json()}))}var O,v=function(e){return h(e)},x=function(e,t){return h(e,"POST",t)},T=function(e,t){return h(e,"PATCH",t)},g=function(e){return h(e,"DELETE")},_=function(e,t){return T("/todos/".concat(e),t)},k=n(9),y=n.n(k);!function(e){e.All="",e.Active="active",e.Completed="completed"}(O||(O={}));var N=function(){},C=c.a.createContext({isLoading:!1,todos:[],addTodo:N,deleteTodo:N,editTodo:N,isInputDisabled:!1,handleRemoveCompletedTodos:N,setSort:N,sort:O.All,errorType:"",setErrorType:N,handleToggleAll:N,loadingTodo:[],tempTodo:null,activeTodos:[],completedTodos:[],isCompletedTodos:!1}),w=function(){var e=c.a.useContext(C);if(void 0===e)throw new Error("Context must be used within a Provider");return e},S=C,A=n(3),E=function(){var e=w(),t=e.errorType,n=e.setErrorType;return Object(o.useEffect)((function(){var e=setTimeout((function(){n("")}),3e3);return function(){clearTimeout(e)}}),[t]),Object(A.jsxs)("div",{className:y()("notification is-danger is-light has-text-weight-normal",{hidden:!t}),children:[Object(A.jsx)("button",{type:"button",className:"delete",onClick:function(){n("")},"aria-label":"delete"}),t]})},I=function(){return Object(A.jsxs)("nav",{className:"filter",children:[Object(A.jsx)(s.b,{to:"/".concat(O.All),className:function(e){var t=e.isActive;return y()("filter__link",{selected:t})},children:"All"}),Object(A.jsx)(s.b,{to:"/".concat(O.Active),className:function(e){var t=e.isActive;return y()("filter__link",{selected:t})},children:"Active"}),Object(A.jsx)(s.b,{to:"/".concat(O.Completed),className:function(e){var t=e.isActive;return y()("filter__link",{selected:t})},children:"Completed"})]})},D=function(){var e=w(),t=e.handleRemoveCompletedTodos,n=e.activeTodos,o=e.completedTodos;return Object(A.jsxs)("footer",{className:"todoapp__footer",children:[Object(A.jsx)("span",{className:"todo-count",children:"".concat(n.length," items left")}),Object(A.jsx)(I,{}),Object(A.jsx)("button",{type:"button",className:y()("todoapp__clear-completed",{todoapp__hidden:!o.length}),onClick:t,children:"Clear completed"})]})},P=n(53),J=n(52),R=(n(47),function(e){var t=e.todo,n=t.id,c=t.title,r=t.completed,a=Object(o.useState)(!1),s=Object(j.a)(a,2),i=s[0],l=s[1],u=Object(o.useState)(c),d=Object(j.a)(u,2),p=d[0],b=d[1],f=w(),m=f.deleteTodo,h=f.editTodo,O=f.loadingTodo,v=t.id&&O.includes(null===t||void 0===t?void 0:t.id),x=function(){p.trim()?h(n,{title:p}):m(n),l(!1)};return Object(A.jsxs)("div",{className:y()("todo",{completed:r}),children:[Object(A.jsx)("label",{htmlFor:"first",className:"todo__status-label",children:Object(A.jsx)("input",{id:"first",type:"checkbox",className:"todo__status",checked:r,onChange:function(){return h(n,{completed:!t.completed})}})}),i?Object(A.jsx)("input",{type:"text",className:"todo__title-field",value:p,onChange:function(e){b(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),x()),"Escape"===e.key&&(l(!1),b(c))},onBlur:function(){x()}}):Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("span",{className:"todo__title",onDoubleClick:function(){l(!0)},children:c}),Object(A.jsx)("button",{type:"button",className:"todo__remove",onClick:function(){return m(n)},children:"\xd7"})]}),Object(A.jsxs)("div",{className:y()("modal overlay",{"is-active":v}),children:[Object(A.jsx)("div",{className:"modal-background has-background-white-ter"}),Object(A.jsx)("div",{className:"loader"})]})]})}),U=function(){var e=w(),t=e.todos,n=e.tempTodo;return Object(A.jsx)("section",{className:"todoapp__main",children:Object(A.jsxs)(P.a,{children:[t.map((function(e){return Object(A.jsx)(J.a,{timeout:300,classNames:"item",children:Object(A.jsx)(R,{todo:e},e.id)},e.id)})),n&&Object(A.jsx)(J.a,{timeout:300,classNames:"temp-item",children:Object(A.jsx)(R,{todo:n})},0)]})})},F=function(){var e=Object(o.useState)(""),t=Object(j.a)(e,2),n=t[0],c=t[1],r=w(),a=r.addTodo,s=r.todos,i=r.isInputDisabled,l=r.handleToggleAll,u=r.isCompletedTodos;return Object(A.jsxs)("header",{className:"todoapp__header",children:[s.length>0&&Object(A.jsx)("button",{type:"button",className:y()("todoapp__toggle-all",{active:u}),onClick:l,"aria-label":"active"}),Object(A.jsx)("form",{onSubmit:function(e){e.preventDefault(),a(n),c("")},children:Object(A.jsx)("input",{type:"text",className:"todoapp__new-todo",placeholder:"What needs to be done?",disabled:i,value:n,onChange:function(e){c(e.target.value)}})})]})},L=6771,B=function(){var e=Object(o.useState)(!1),t=Object(j.a)(e,2),n=t[0],c=t[1],r=function(e,t){var n=Object(o.useState)((function(){try{return JSON.parse(localStorage.getItem(e)||"")||t}catch(n){return t}})),c=Object(j.a)(n,2),r=c[0],a=c[1];return[r,function(t){a(t),localStorage.setItem(e,JSON.stringify(t))}]}("todos",[]),a=Object(j.a)(r,2),s=a[0],u=a[1],f=Object(o.useState)(""),m=Object(j.a)(f,2),h=m[0],T=m[1],k=Object(o.useState)(O.All),y=Object(j.a)(k,2),N=y[0],C=y[1],w=Object(o.useState)(!1),I=Object(j.a)(w,2),P=I[0],J=I[1],R=Object(o.useState)(null),B=Object(j.a)(R,2),G=B[0],H=B[1],K=Object(o.useState)([0]),M=Object(j.a)(K,2),W=M[0],q=M[1],z=Object(b.j)(),Q=function(e,t){return Object(o.useMemo)((function(){return e.filter((function(e){switch(t.pathname.slice(1)){case O.Active:return!e.completed;case O.Completed:return e.completed;case O.All:default:return e}}))}),[e,t])}(s,z),V=s.filter((function(e){return!e.completed})),X=s.filter((function(e){return e.completed})),Y=s.every((function(e){return e.completed})),Z=Object(o.useCallback)(Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(!0),e.next=4,v("/todos?userId=".concat(L));case 4:t=e.sent,u(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),T("Error loading data");case 11:return e.prev=11,c(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])}))),[u,c,T]);Object(o.useEffect)((function(){Z()}),[]);var $=function(){var e=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.trim()){e.next=3;break}return T("Title can't be empty"),e.abrupt("return");case 3:return J(!0),e.prev=4,e.next=7,o={title:t,userId:L,completed:!1},x("/todos?userId=".concat(L),o);case 7:n=e.sent,H(Object(l.a)(Object(l.a)({},n),{},{id:0})),u([].concat(Object(i.a)(s),[n])),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),T("Unable to add a todo");case 15:return e.prev=15,J(!1),H(null),e.finish(15);case 19:case"end":return e.stop()}var o}),e,null,[[4,12,15,19]])})));return function(t){return e.apply(this,arguments)}}(),ee=Object(o.useCallback)(function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q((function(e){return[].concat(Object(i.a)(e),[t])})),e.prev=1,e.next=4,g("/todos/".concat(t));case 4:u((function(e){return e.filter((function(e){return e.id!==t}))})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),T("Unable to delete a todo");case 10:return e.prev=10,q([0]),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])})));return function(t){return e.apply(this,arguments)}}(),[T,c,u]),te=Object(o.useCallback)((function(){X.forEach((function(e){return ee(e.id)})),u(V)}),[s]),ne=function(){var e=Object(p.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q((function(e){return[].concat(Object(i.a)(e),[t])})),e.prev=1,e.next=4,_(t,n);case 4:u((function(e){return e.map((function(e){return e.id!==t?e:Object(l.a)(Object(l.a)({},e),n)}))})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),T("Unable to edit a todo");case 10:return e.prev=10,q([0]),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(A.jsx)(S.Provider,{value:{isLoading:n,todos:Q,deleteTodo:ee,editTodo:ne,addTodo:$,isInputDisabled:P,handleRemoveCompletedTodos:te,setSort:C,sort:N,errorType:h,setErrorType:T,handleToggleAll:function(){Y?X.map((function(e){return ne(e.id,{completed:!1})})):Q.map((function(e){return ne(e.id,{completed:!0})}))},loadingTodo:W,tempTodo:G,activeTodos:V,completedTodos:X,isCompletedTodos:Y},children:Object(A.jsxs)("div",{className:"todoapp",children:[Object(A.jsx)("h1",{className:"todoapp__title",children:"todos"}),Object(A.jsxs)("div",{className:"todoapp__content",children:[Object(A.jsx)(F,{}),Object(A.jsx)(U,{}),Q.length>0&&Object(A.jsx)(D,{})]}),h&&Object(A.jsx)(E,{})]})})},G=function(){return Object(A.jsx)(s.a,{children:Object(A.jsx)(B,{})})};a.a.createRoot(document.getElementById("root")).render(Object(A.jsx)(G,{}))}},[[50,1,2]]]);
//# sourceMappingURL=main.dfb93d4c.chunk.js.map